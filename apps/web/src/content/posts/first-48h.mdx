---
title: 48h of public OpenStatus
description: The numbers, limits we faced and consequences we have taken.
author:
  name: Maximilian Kaske, Thibault Le Ouay - Ducasse
  url:
publishedAt: 2023-08-02
image: /assets/posts/blog-post-1.png
---

## 48h of Rollercoaster

The last two days after the launch where crazy. We were not expecting the amount
of interest. The gh stars went wild. The numbers of users and the created
monitors went way over our expectations. Thank you for all your support. This
motivates even more.

The raw numbers are crazy:

- Number of monitors: 315
- Number of users: 375
- Number of status pages: 172

With lots of users comes lots of responsibility. And without the high amount we
wouldn’t have known all the flaws we had in our system. We immediately
encountered issues and had to act quickly.

## Limits we encountered

- We were DDOSing Vercel’s firewalls from upstash servers. Before thinking of
  removing [QStash](http://upstash.com/qstash?ref=openstatus), we had to create
  a hot fix to add delays between 0 to 180 seconds to every check we were
  sending to **not** send every request at once. That reduced the retries we had
  on QStash drastically as we were not simoultaneously sending lots of requests
  to vercel anymore. Now, after the measures we have taken, we have a random
  check between 0 and 90 seconds.

- We were storing the metadata `res.text()` inside of tinybird and where
  fetching `SELECT * from monitors WHERE …`. This means that if the text is html
  we will store the html of the page, which is fine. But that means also, that
  we quickly reached the 100MB limit of result length send whenever you where
  accessing your monitor data. We still ingest it and will only request it in
  the near future whenever you are interested and click on the "View metadata"
  action.

- We were close to dropping QStash because of the limits reaching very soon. We
  will keep it until now to make sure that every check is really passed.

![Qstash Usage](/assets/posts/first-48h/qstash-usage.png)

With the current infrastructure we are running on, this would costs a lot.
Therefore we had to **downgrade all the monitors to a single region**, by
default `/random`. We apologize for that but we had to take the approach to stay
in a reasonable cost cap. Once normalized, we will inform you about new
conditions.

A big appreciation for [@chronark\_](https://twitter.com/chronark_) who jumped
into a call to discuss possible solutions and shared his knowledge regarding his
own service [planetfall.io](https://planetfall.io). Big big appreciation!

Let's break the current numbers a bit more down if we would have kept pingin all
the regions:

- Number of checks every 10min: 315 \* 18 regions = 5.670
- Number of checks every 1h: 5.670 \* 6 = 34.020
- Number of checks every day: 34.020 \* 24 = 816.480

![Vercel Usage](/assets/posts/first-48h/vercel-usage.png)

Regarding the edge middleware invocations, we fixed an issue regarding regex
where it got called whenever an api endpoint would have called.

Vercel's Pro plan has 1M edge function executions and for every 1M more, we
would pay $2. This sounds not much but for a free plan, we cannot pay 2$ per
day.

With this incident, we will rethink prices and plans that are presented on our
homepage.

Join [discord](https://openstatus.dev/discord) if you want to learn more or just
have a chat!

Again, thank you for all your support and your understanding.
